<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Data Management (for INF-2700): pager.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>pager.h</h1><a href="pager_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00041"></a>00041 <span class="preprocessor">#ifndef _PAGER_H_</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#define _PAGER_H_</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="pmsg_8h.html" title="Print a message to stderr when level is higher than the global msglevel.">pmsg.h</a>&quot;</span>
<a name="l00047"></a>00047 
<a name="l00049"></a><a class="code" href="pager_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">00049</a> <span class="preprocessor">#define BLOCK_SIZE 512L</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00052"></a><a class="code" href="pager_8h.html#ae12c40b3b2496ea64cbd1f626d4a5817">00052</a> <span class="preprocessor">#define NUM_PAGES 10</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="pager_8h.html#af11125b8a270a84314fdb616e19b11ec">00055</a> <span class="preprocessor">#define PAGE_HEADER_SIZE 20</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00058"></a><a class="code" href="pager_8h.html#ae4777ede3ed2173c78fab7798ad6eddb">00058</a> <span class="preprocessor">#define MAX_OPEN_FILES 10</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00061"></a><a class="code" href="pager_8h.html#a3ac36dd0f02f263e5966ac1d1ecbd1bd">00061</a> <span class="preprocessor">#define INT_SIZE 4</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>
<a name="l00063"></a><a class="code" href="pager_8h.html#a671680adac5a11c689cea2ede7bb9550">00063</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structblock__struct.html" title="Database file block.">block_struct</a> * <a class="code" href="structblock__struct.html" title="Database file block.">block_p</a>;
<a name="l00064"></a><a class="code" href="pager_8h.html#a386999387e0830dbb2bdffd016ee4186">00064</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structpage__struct.html" title="Database buffer page.">page_struct</a> * <a class="code" href="structpage__struct.html" title="Database buffer page.">page_p</a>;
<a name="l00065"></a>00065 
<a name="l00067"></a><a class="code" href="pager_8h.html#a144a93c0eedc9713f529e77beedc4efc">00067</a> <span class="keywordtype">int</span> <a class="code" href="pager_8h.html#a144a93c0eedc9713f529e77beedc4efc">num_file_handles</a>;
<a name="l00068"></a>00068 
<a name="l00070"></a><a class="code" href="pager_8h.html#adca9c95397e7045247e5f7dff9f5c3bf">00070</a> page_p <a class="code" href="pager_8h.html#adca9c95397e7045247e5f7dff9f5c3bf">pages</a>[<a class="code" href="pager_8h.html#ae12c40b3b2496ea64cbd1f626d4a5817">NUM_PAGES</a>];
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#aa1e03bea6f7cc9fe4647931bade28d3c">put_file_info</a> ( <a class="code" href="pmsg_8h.html#af9e14cbc16deb37f574c22beaa9a48ad">pmsg_level</a> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *fname );
<a name="l00073"></a>00073 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#af4bfd437cbedb7ddedec20e67e673b44">put_page_info</a> ( <a class="code" href="pmsg_8h.html#af9e14cbc16deb37f574c22beaa9a48ad">pmsg_level</a> level, page_p p); 
<a name="l00074"></a>00074 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#ae6432ef7457cc8fd0cb1071544105578">put_block_info</a> ( <a class="code" href="pmsg_8h.html#af9e14cbc16deb37f574c22beaa9a48ad">pmsg_level</a> level, block_p b); 
<a name="l00075"></a>00075 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#a3c71189ff63bf5117e9132d01661316c">put_pager_info</a> ( <a class="code" href="pmsg_8h.html#af9e14cbc16deb37f574c22beaa9a48ad">pmsg_level</a> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg ); 
<a name="l00076"></a>00076 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#a05696f13db13dbb9e7eaab744e459716">put_pager_profiler_info</a> ( <a class="code" href="pmsg_8h.html#af9e14cbc16deb37f574c22beaa9a48ad">pmsg_level</a> level );
<a name="l00077"></a>00077 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#a4859578560f2f62031cff8313116fa2f">put_pqueues_info</a> ( <a class="code" href="pmsg_8h.html#af9e14cbc16deb37f574c22beaa9a48ad">pmsg_level</a> level );
<a name="l00078"></a>00078 
<a name="l00080"></a>00080 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#ac3cc6ecbe26ba084e669955ff01e9e26">set_system_dir</a> ( <span class="keywordtype">char</span> *dir );
<a name="l00081"></a>00081 
<a name="l00083"></a>00083 <span class="keyword">extern</span> <span class="keywordtype">char</span>* <a class="code" href="pager_8c.html#ad2d7b5713fe117690d7f612a6eedcdfa">system_dir</a> ();
<a name="l00084"></a>00084 
<a name="l00089"></a>00089 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a75f76fe5fe3b92e3536f5123dd4db10d">pager_init</a> ( <span class="keywordtype">void</span> );
<a name="l00096"></a>00096 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#a52d442ae882695568880d1f6a064c220">pager_terminate</a> ( <span class="keywordtype">void</span> );
<a name="l00097"></a>00097 
<a name="l00099"></a>00099 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#a57a3ad1575574bf1af1eabcc6e5b80f6">pager_profiler_reset</a> ( <span class="keywordtype">void</span> );
<a name="l00100"></a>00100 
<a name="l00113"></a>00113 <span class="keyword">extern</span> page_p <a class="code" href="pager_8c.html#ac6d302e61f9ef0658896f6f269372f29">get_page</a> ( <span class="keyword">const</span> <span class="keywordtype">char</span> *fname, <span class="keywordtype">int</span> blknr );
<a name="l00115"></a>00115 <span class="keyword">extern</span> page_p <a class="code" href="pager_8c.html#ad663e3f2e8c5daaae8f5002e56689dc4">get_page_for_append</a> ( <span class="keyword">const</span> <span class="keywordtype">char</span> *fname );
<a name="l00117"></a>00117 <span class="keyword">extern</span> page_p <a class="code" href="pager_8c.html#ab05479ee43554db35ff2a157d9c39592">get_next_page</a> ( page_p p );
<a name="l00119"></a>00119 <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#a6b823fe5794c31c0a5d987f60568c556">page_set_pos_begin</a> ( page_p p );
<a name="l00121"></a>00121 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#aa5341cc5ee73400407087181f229a163">close_file</a> ( <span class="keyword">const</span> <span class="keywordtype">char</span> *fname );
<a name="l00122"></a>00122 
<a name="l00124"></a>00124 <span class="keyword">extern</span> page_p <a class="code" href="pager_8c.html#a42a02f62791da89bfc6314778d2aed65">pin</a> ( block_p b );
<a name="l00126"></a>00126 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="pager_8c.html#a1cbbae211b6411ea79d80d45f9831c62">unpin</a> ( page_p p );
<a name="l00130"></a>00130 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a7df86be437e842c66115a00daa85f0f9">read_page</a> ( page_p p );
<a name="l00132"></a>00132 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a8f24a7387621c761b7c68908f969f976">write_page</a> ( page_p p );
<a name="l00134"></a>00134 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a4edda2c8b563580051237b2071b61f57">page_block_nr</a> ( page_p p );
<a name="l00136"></a>00136 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a22cd5cbd3395cfcf1683e5d26d368a87">page_current_pos</a> ( page_p p );
<a name="l00138"></a>00138 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a56a50369677f6867f99c527b240af50e">page_set_current_pos</a> ( page_p p, <span class="keywordtype">int</span> pos );
<a name="l00139"></a>00139 
<a name="l00141"></a>00141 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#ab2ec49e0fd3c00804c5cf019ffd939f0">page_valid_pos_for_get</a> ( page_p p, <span class="keywordtype">int</span> offset );
<a name="l00143"></a>00143 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a4017443dc8ef65a01c4036cb34309c35">page_valid_pos_for_put</a> ( page_p p, <span class="keywordtype">int</span> offset, <span class="keywordtype">int</span> len );
<a name="l00144"></a>00144 
<a name="l00146"></a>00146 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a3a7e91c1ecf48d397e533ca229649754">eob</a> ( page_p p );
<a name="l00148"></a>00148 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a579742e19ba1c0fd2ecf4d72f63ecfa4">eof</a> ( page_p p );
<a name="l00150"></a>00150 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#adceb30d34ca97faf083e03c2d2599d47">page_get_int</a> ( page_p p );
<a name="l00155"></a>00155 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#ab3ad5188ed0e9194283c6fb120b1c805">page_put_int</a> ( page_p p, <span class="keywordtype">int</span> val );
<a name="l00159"></a>00159 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a139b8f8707d0a1d86dd103f912876abb">page_get_int_at</a> ( page_p p, <span class="keywordtype">int</span> offset );
<a name="l00163"></a>00163 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#acb993fada14418a8fe30e82b248561b9">page_put_int_at</a> ( page_p p, <span class="keywordtype">int</span> offset, <span class="keywordtype">int</span> val );
<a name="l00164"></a>00164 
<a name="l00171"></a>00171 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a5f00bd55b790f59837b93fe81f178a62">page_get_str</a> ( page_p p, <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00177"></a>00177 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#a36162a65146dbae9c6c2cecad2596350">page_put_str</a> ( page_p p, <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00184"></a>00184 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#ab2cbe9990616cefc23cb7009925fc6da">page_get_str_at</a> ( page_p p, <span class="keywordtype">int</span> offset, <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00189"></a>00189 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="pager_8c.html#ad78a23d1d69d4e193db6928676c2c15e">page_put_str_at</a> ( page_p p, <span class="keywordtype">int</span> offset, <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> len );
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 22 Sep 2015 for Data Management (for INF-2700) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
